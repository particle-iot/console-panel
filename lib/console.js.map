{"version":3,"file":"console.js","sources":["../src/console-manager.js","../src/console-view.js","../src/console.js"],"sourcesContent":["import {Emitter} from 'event-kit';\n\nexport default class ConsoleManager {\n\tconstructor(view) {\n\t\tthis.view = view;\n\t\tthis.emitter = new Emitter;\n\t}\n\n\tdestroy() {\n\t\tthis.emitter.dispose();\n\t}\n\n\t// Toggle console panel\n\ttoggle() {\n\t\tthis.view.toggle();\n\t}\n\n  stickBottom() {\n    this.view.stickTop = false;\n  }\n\n  stickTop() {\n    this.view.stickTop = true;\n  }\n\n\t// Log message with default level\n\tlog(message, level = 'info') {\n\t\tthis.view.log(message, level);\n\t}\n\n\t// Log error\n\terror(message) {\n\t\tthis.log(message, 'error');\n\t}\n\n\t// Log warning\n\twarn(message) {\n\t\tthis.log(message, 'warn');\n\t}\n\n\t// Log notice\n\tnotice(message) {\n\t\tthis.log(message, 'notice');\n\t}\n\n\t// Log debug message\n\tdebug(message) {\n\t\tthis.log(message, 'debug');\n\t}\n\n\t// Log raw text\n\traw(rawText, level, lineEnding) {\n\t\tif (level === null) {\n\t\t\tlevel = 'info';\n\t\t}\n\t\tif (lineEnding === null) {\n\t\t\tlineEnding = \"\\n\";\n\t\t}\n\t\trawText.split(lineEnding).forEach((line) => {\n\t\t\tthis.log(line, level);\n\t\t});\n\t}\n\n\t// Clear console panel\n\tclear() {\n\t\tthis.view.clear();\n\t}\n}\n","import {$$, View} from 'atom-space-pen-views';\n\nexport default class ConsoleView extends View {\n\tstatic content() {\n\t\tthis.div({id: 'atom-console'}, () => {\n\t\t\tthis.div({class: 'panel-body view-scroller', outlet: 'body'}, () => {\n\t\t\t\tthis.pre({class: 'native-key-bindings', outlet: 'output', tabindex: -1});\n\t\t\t});\n\t\t});\n\t}\n\n\t// Tear down any state and detach\n\tdestroy() {\n\t\tthis.disposables?.dispose();\n\t}\n\n\tgetTitle() {\n\t\treturn 'Console';\n\t}\n\n\tgetPath() {\n\t\treturn 'console';\n\t}\n\n\tgetUri() {\n\t\treturn `particle-dev://editor/${this.getPath()}`;\n\t}\n\n\tgetDefaultLocation() {\n\t\treturn 'bottom';\n\t}\n\n\tshow() {\n\t\tatom.workspace.open(this, {activatePane: false});\n\t\tatom.workspace.getBottomDock().show();\n\t}\n\n\thide() {\n\t\tatom.workspace.getBottomDock().hide();\n\t}\n\n\ttoggle() {\n\t\tatom.workspace.toggle(this);\n\t}\n\n\tlog(message, level) {\n\t\tconst at_bottom = ((this.body.scrollTop() + this.body.innerHeight() + 10) > this.body[0].scrollHeight);\n\n\t\tif (typeof message === 'string') {\n\t\t\tthis.output.append($$(function() {\n\t\t\t\tthis.p({class: `level-${level}`}, message);\n\t\t\t})\n\t\t\t);\n\t\t} else {\n\t\t\tthis.output.append(message);\n\t\t}\n\n\t\tif (at_bottom && !this.stickTop) {\n\t\t\tthis.body.scrollTop(this.body[0].scrollHeight);\n\t\t} else if (this.stickTop) {\n      this.body.scrollTop(0);\n    }\n\t\tif(atom.config.get('console-panel.show') === true ){\t\t\t\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis.output.empty();\n\t\tthis.hide();\n\t}\n}\n","import { CompositeDisposable } from 'atom';\nimport ConsoleManager from './console-manager';\nimport ConsoleView from './console-view';\nimport packageConfig from './config/config-schema.json';\n\nexport default {\n\tconfig: packageConfig,\n\n\tconsoleView: null,\n\tsubscriptions: null,\n\n\tactivate() {\n\t\tthis.consoleView = new ConsoleView();\n\t\tthis.consoleManager = new ConsoleManager(this.consoleView);\n\n\t\t// Events subscribed to in atom's system can be easily cleaned up with a CompositeDisposable\n\t\tthis.subscriptions = new CompositeDisposable;\n\n\t\t// Register command that toggles this view\n\t\tthis.subscriptions.add(\n\t\t\tatom.commands.add('atom-workspace', {\n\t\t\t\t'console:toggle': () => this.consoleManager.toggle()\n\t\t\t})\n\t\t);\n\t},\n\n\tdeactivate() {\n\t\tthis.subscriptions?.dispose();\n\t\tthis.consoleView?.destroy();\n\t},\n\n\tprovideConsolePanel() {\n\t\treturn this.consoleManager;\n\t},\n\n\tconsumeToolBar(toolBar) {\n\t\tthis.toolBar = toolBar('console-tool-bar');\n\n\t\tthis.toolBar.addButton({\n\t\t\ticon: 'align-left',\n\t\t\ticonset: 'fi',\n\t\t\ttooltip: 'Toggle Console',\n\t\t\tcallback: 'console:toggle',\n\t\t\tpriority: 600\n\t\t});\n\t}\n};\n"],"names":["ConsoleManager","constructor","view","emitter","Emitter","destroy","dispose","toggle","stickBottom","stickTop","log","message","level","error","warn","notice","debug","raw","rawText","lineEnding","split","forEach","line","clear","ConsoleView","View","content","div","id","class","outlet","pre","tabindex","disposables","getTitle","getPath","getUri","getDefaultLocation","show","atom","workspace","open","activatePane","getBottomDock","hide","at_bottom","body","scrollTop","innerHeight","scrollHeight","output","append","$$","p","config","get","empty","packageConfig","consoleView","subscriptions","activate","consoleManager","CompositeDisposable","add","commands","deactivate","provideConsolePanel","consumeToolBar","toolBar","addButton","icon","iconset","tooltip","callback","priority"],"mappings":"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"}